{
    "name": "Rest Api 5",
    "resolutionPath": "/api5",
    "serviceType": "WEB_API",
    "enabled": true,
    "folderPath": "/myApis",
    "methodsAllowed": [
      "GET",
      "POST",
      "PUT",
      "DELETE"
    ],
    "tracingEnabled": false,
    "wssProcessingEnabled": false,
    "laxResolution": false,
    "policy": {
      "code": {
        "All": [
          {
            "AddHeader": {
              "headerName": "requestTime",
              "headerValue": "${request.time}",
              "target": "REQUEST"
            }
          },
          {
            "HttpRouting": {
              "keyAlias": "api5",
              "nonDefaultKeystoreId": "00000000000000000000000000000002",
              "protectedServiceUrl": "http://app-3-java.test-apps.svc:8080/up",
              "requestHeaderRules": {
                ".type": "httpPassthroughRuleSet",
                "forwardAll": true,
                "rules": [
                  {
                    ".type": "httpPassthroughRule",
                    "name": "Cookie"
                  },
                  {
                    ".type": "httpPassthroughRule",
                    "name": "SOAPAction"
                  }
                ]
              },
              "requestParamRules": {
                ".type": "httpPassthroughRuleSet",
                "forwardAll": true,
                "rules": []
              },
              "responseHeaderRules": {
                ".type": "httpPassthroughRuleSet",
                "forwardAll": true,
                "rules": [
                  {
                    ".type": "httpPassthroughRule",
                    "name": "Set-Cookie"
                  }
                ]
              }
            }
          },
          {
          "SetVariable": {
            "expression": "${long(request.time.millis)}",
            "variable": "start"
            }
          },
          {
          "SetVariable": {
            "expression": "${long(gateway.time.millis)}",
            "variable": "end"
            }
          },
          {
          "AddHeader": {
            "headerName": "policy>>>",
            "headerValue": "${request.time}",
            "target": "RESPONSE"
            }
          },

          {
          "AddHeader": {
            "headerName": "policy<<<",
            "headerValue": "${gateway.time}",
            "target": "RESPONSE"
            }
          },

          {
          "AddHeader": {
            "headerName": "CHECK",
            "headerValue": "${end - start}",
            "target": "RESPONSE"
            }
          }
        ]
      }
    }
  }
